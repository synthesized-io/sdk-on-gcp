actions:
  - name: kubectl smoke test
    bashTest:
      script: kubectl version
      expect:
        exitCode:
          equals: 0
  - name: Wait for deployment get ready
    bashTest:
      script: |
        echo "${APP_INSTANCE_NAME}-sdk, $NAMESPACE"
        kubectl wait --for=condition=Available=True --timeout=180s --namespace $NAMESPACE deploy ${APP_INSTANCE_NAME}-sdk
      expect:
        stdout:
          contains: condition met
